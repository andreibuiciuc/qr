package moduler

import (
	"qr/qr-gen/encoder"
	"qr/qr-gen/interleaver"
	"qr/qr-gen/versioner"
	"testing"
)

func TestModuler(t *testing.T) {
	// encoded := "01000011111101101011011001000110010101011111011011100110111101110100011001000010111101110111011010000110000001110111011101010110010101110111011000110010110000100010011010000110000001110000011001010101111100100111011010010111110000100000011110000110001100100111011100100110010101111110000000110010010101100010011011101100000001100001011001010010000100010001001011000110000001101110110000000110110001111000011000010001011001111001001010010111111011000010011000000110001100100001000100000111111011000010011110000101100011010100101001101111011110001100000001011001101000011010001111110000110011010101011010100011011011000000011001101111000100010000101001010011100110101101000110111101110001010111010110000001111001101110101110011010000110111100001101101111111110001000011001001100011100011110010111001000111011101111110111011111100111011111001001101000111100010111110001001011001001011111011110110110100001011000001101110011110010100100110001101100001011010011110011010100111101110000101101100000101100011111101011000111110011000111010001100100110101010101011110010100100011000000000"
	// m := NewModuler(5)
	// m.CreateModuleMatrix(encoded)
	input := "https://www.qrcode.com/"

	v := versioner.New()
	mode, _ := v.GetMode(input)
	version, _ := v.GetVersion(input, mode, versioner.QrEcQuartile)

	e := encoder.New()
	encoded, _ := e.Encode(input, versioner.QrEcQuartile)
	encoded = e.AugmentEncodedInput(encoded, version, versioner.QrEcMedium)

	i := interleaver.New()
	data := i.GetFinalMessage(encoded, version, versioner.QrEcMedium)

	m := NewModuler(int(version))
	m.CreateModuleMatrix(data)
}
